
> rest-express@1.0.0 dev
> NODE_ENV=development tsx server/index.ts

ðŸš€ Initializing FieldOps Pro Infrastructure...
{"timestamp":"2025-08-30T04:50:53.406Z","level":"INFO","message":"Logger initialized","meta":{"config":{"level":0,"enableConsole":true,"enableFile":false,"enableAuditTrail":true,"format":"json"}},"module":"index.ts:43:27)"}
  âœ“ Logger service initialized
{"timestamp":"2025-08-30T04:50:53.440Z","level":"INFO","message":"EventBus initialized","meta":{"registeredEvents":[]},"module":"index.ts:43:3)"}
  âœ“ Event Bus initialized
{"timestamp":"2025-08-30T04:50:53.444Z","level":"INFO","message":"Audit Logger initialized","meta":{"maxEntries":50000,"retentionPolicy":"memory-based"},"module":"index.ts:43:3)"}
  âœ“ Audit Logger initialized
{"timestamp":"2025-08-30T04:50:53.450Z","level":"INFO","message":"Security Service initialized","meta":{"rateLimitConfigs":["default","api","auth"],"encryptionAlgorithm":"aes-256-gcm"},"module":"index.ts:43:3)"}
  âœ“ Security service initialized
{"timestamp":"2025-08-30T04:50:53.458Z","level":"INFO","message":"RBAC Service initialized","meta":{"roleCount":7,"roles":["operations_director","administrator","manager","dispatcher","field_engineer","field_agent","client"]},"module":"index.ts:43:3)"}
  âœ“ RBAC service initialized
  âœ“ Error Handler initialized
  âœ“ Security Middleware initialized
  âœ“ Global error handlers registered
{"timestamp":"2025-08-30T04:50:53.494Z","level":"DEBUG","message":"Event handler registered for: security.breachDetected","meta":{"totalHandlers":1},"module":"index.ts:43:3)"}
{"timestamp":"2025-08-30T04:50:53.494Z","level":"DEBUG","message":"Event handler registered for: security.rateLimitExceeded","meta":{"totalHandlers":1},"module":"index.ts:43:3)"}
{"timestamp":"2025-08-30T04:50:53.495Z","level":"DEBUG","message":"Event handler registered for: security.unauthorizedAccess","meta":{"totalHandlers":1},"module":"index.ts:43:3)"}
{"timestamp":"2025-08-30T04:50:53.495Z","level":"DEBUG","message":"Event handler registered for: roleImpersonation.started","meta":{"totalHandlers":1},"module":"index.ts:43:3)"}
{"timestamp":"2025-08-30T04:50:53.495Z","level":"DEBUG","message":"Event handler registered for: roleImpersonation.stopped","meta":{"totalHandlers":1},"module":"index.ts:43:3)"}
{"timestamp":"2025-08-30T04:50:53.496Z","level":"DEBUG","message":"Event handler registered for: workOrder.created","meta":{"totalHandlers":1},"module":"index.ts:43:3)"}
{"timestamp":"2025-08-30T04:50:53.496Z","level":"DEBUG","message":"Event handler registered for: workOrder.statusChanged","meta":{"totalHandlers":1},"module":"index.ts:43:3)"}
  âœ“ Event listeners registered
{"timestamp":"2025-08-30T04:50:53.497Z","level":"INFO","message":"FieldOps Pro Infrastructure initialized successfully","meta":{"initializationTime":"300ms","services":["logger","eventBus","auditLogger","security","rbac","storage"],"environment":"development"},"module":"index.ts:43:3)"}
âœ… FieldOps Pro Infrastructure ready in 300ms
{"timestamp":"2025-08-30T04:50:53.785Z","level":"INFO","message":"Infrastructure routes registered","module":"infrastructure"}
{"timestamp":"2025-08-30T04:50:53.786Z","level":"INFO","message":"Integrated routes initialized successfully","module":"infrastructure"}
4:50:53 AM [express] serving on port 5000
Browserslist: browsers data (caniuse-lite) is 10 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
4:51:09 AM [express] GET /api/auth/user 401 in 4ms :: {"message":"Unauthorized"}
Auth user request - testing role: undefined company type: undefined
4:51:15 AM [express] GET /api/auth/user 304 in 670ms :: {"id":"46082224","email":"eddydoescher42@gmaâ€¦
express deprecated req.host: Use req.hostname instead file:/home/runner/workspace/node_modules/openid-client/build/passport.js:224:49
4:52:59 AM [express] GET /api/login 302 in 3296ms
4:53:11 AM [express] GET /api/callback 302 in 3248ms
Auth user request - testing role: undefined company type: undefined
4:53:21 AM [express] GET /api/auth/user 200 in 304ms :: {"id":"46082224","email":"eddydoescher42@gmaâ€¦
4:53:22 AM [express] GET /api/companies 304 in 416ms :: [{"id":"1d5bd1e9-21ac-4f58-baf7-fd806765296câ€¦
4:53:22 AM [express] GET /api/messages 304 in 747ms :: []
4:53:22 AM [express] GET /api/access-requests 304 in 747ms :: []
4:53:22 AM [express] GET /api/approval-requests 304 in 733ms :: []
4:53:22 AM [express] GET /api/operations/budget-summary 304 in 762ms :: {"totalEarned":0,"todayEarniâ€¦
4:53:22 AM [express] GET /api/operations/stats 304 in 962ms :: {"totalAdmins":1,"activeCompanies":2,â€¦
4:57:02 AM [express] GET /api/users/field-agents 200 in 6402ms :: [{"id":"814dd9b2-d6c1-49d2-b138-dbâ€¦
^C{"timestamp":"2025-08-30T04:59:45.356Z","level":"INFO","message":"Received SIGINT, starting graceful shutdown...","module":"unknown"}
{"timestamp":"2025-08-30T04:59:45.356Z","level":"INFO","message":"Graceful shutdown completed","module":"unknown"}
